warning: ignoring template "/mnt/usb-drive/Development/elixir/grocery_planner/lib/grocery_planner_web/live/auth/sign_in_live.html.heex" because the LiveView GroceryPlannerWeb.Auth.SignInLive defines a render/1 function
  lib/grocery_planner_web/live/auth/sign_in_live.ex:1: GroceryPlannerWeb.Auth.SignInLive (module)

Getting extensions in current project...
Running setup for AshPostgres.DataLayer...
Running ExUnit with seed: 919783, max_cases: 16

    warning: variable "view" is unused (if the variable is not meant to be used, prefix it with an underscore)
    │
 22 │       {:ok, view, html} = live(conn, "/analytics")
    │             ~~~~
    │
    └─ test/grocery_planner_web/live/analytics_live_test.exs:22:13: GroceryPlannerWeb.AnalyticsLiveTest."test Analytics Dashboard renders dashboard with empty state"/1

Categories before load: []
Categories after load: []
Category Breakdown: []
Categories before load: []
Categories after load: []
Category Breakdown: []
.Item 1: %GroceryPlanner.Inventory.GroceryItem{
  id: "91ecafbe-2550-4db8-a21a-f66d208e6c14",
  name: "Test Item -576460752303423007",
  description: nil,
  default_unit: nil,
  barcode: nil,
  account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
  category_id: nil,
  created_at: ~U[2025-12-12 09:16:35.003826Z],
  updated_at: ~U[2025-12-12 09:16:35.003826Z],
  tags_join_assoc: #Ash.NotLoaded<:relationship, field: :tags_join_assoc>,
  account: %GroceryPlanner.Accounts.Account{
    id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    name: "Test Account -576460752303422524",
    timezone: "America/New_York",
    created_at: ~U[2025-12-12 09:16:34.506207Z],
    updated_at: ~U[2025-12-12 09:16:34.506207Z],
    users_join_assoc: #Ash.NotLoaded<:relationship, field: :users_join_assoc>,
    memberships: #Ash.NotLoaded<:relationship, field: :memberships>,
    users: #Ash.NotLoaded<:relationship, field: :users>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "accounts">
  },
  category: #Ash.NotLoaded<:relationship, field: :category>,
  inventory_entries: #Ash.NotLoaded<:relationship, field: :inventory_entries>,
  tags: #Ash.NotLoaded<:relationship, field: :tags>,
  __meta__: #Ecto.Schema.Metadata<:loaded, "grocery_items">
}
Item 2: %GroceryPlanner.Inventory.GroceryItem{
  id: "5ce14232-ab2d-46f6-bc3e-4a462084f1d3",
  name: "Test Item -576460752303422943",
  description: nil,
  default_unit: nil,
  barcode: nil,
  account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
  category_id: nil,
  created_at: ~U[2025-12-12 09:16:35.017692Z],
  updated_at: ~U[2025-12-12 09:16:35.017692Z],
  tags_join_assoc: #Ash.NotLoaded<:relationship, field: :tags_join_assoc>,
  account: %GroceryPlanner.Accounts.Account{
    id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    name: "Test Account -576460752303422524",
    timezone: "America/New_York",
    created_at: ~U[2025-12-12 09:16:34.506207Z],
    updated_at: ~U[2025-12-12 09:16:34.506207Z],
    users_join_assoc: #Ash.NotLoaded<:relationship, field: :users_join_assoc>,
    memberships: #Ash.NotLoaded<:relationship, field: :memberships>,
    users: #Ash.NotLoaded<:relationship, field: :users>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "accounts">
  },
  category: #Ash.NotLoaded<:relationship, field: :category>,
  inventory_entries: #Ash.NotLoaded<:relationship, field: :inventory_entries>,
  tags: #Ash.NotLoaded<:relationship, field: :tags>,
  __meta__: #Ecto.Schema.Metadata<:loaded, "grocery_items">
}
Categories before load: [
  %GroceryPlanner.Inventory.Category{
    id: "c7c05683-694c-4a6c-a662-ce0cdabb602a",
    name: "Test Category -576460752303422975",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:35.012032Z],
    updated_at: ~U[2025-12-12 09:16:35.012032Z],
    item_count: #Ash.NotLoaded<:aggregate, field: :item_count>,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  },
  %GroceryPlanner.Inventory.Category{
    id: "5786f4bd-187c-40f6-ac47-9c2008a71a35",
    name: "Test Category -576460752303423039",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:34.996319Z],
    updated_at: ~U[2025-12-12 09:16:34.996319Z],
    item_count: #Ash.NotLoaded<:aggregate, field: :item_count>,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  }
]
Categories after load: [
  %GroceryPlanner.Inventory.Category{
    id: "c7c05683-694c-4a6c-a662-ce0cdabb602a",
    name: "Test Category -576460752303422975",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:35.012032Z],
    updated_at: ~U[2025-12-12 09:16:35.012032Z],
    item_count: 0,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  },
  %GroceryPlanner.Inventory.Category{
    id: "5786f4bd-187c-40f6-ac47-9c2008a71a35",
    name: "Test Category -576460752303423039",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:34.996319Z],
    updated_at: ~U[2025-12-12 09:16:34.996319Z],
    item_count: 0,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  }
]
Category Breakdown: [
  %{count: 0, name: "Test Category -576460752303422975"},
  %{count: 0, name: "Test Category -576460752303423039"}
]
Categories before load: [
  %GroceryPlanner.Inventory.Category{
    id: "c7c05683-694c-4a6c-a662-ce0cdabb602a",
    name: "Test Category -576460752303422975",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:35.012032Z],
    updated_at: ~U[2025-12-12 09:16:35.012032Z],
    item_count: #Ash.NotLoaded<:aggregate, field: :item_count>,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  },
  %GroceryPlanner.Inventory.Category{
    id: "5786f4bd-187c-40f6-ac47-9c2008a71a35",
    name: "Test Category -576460752303423039",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:34.996319Z],
    updated_at: ~U[2025-12-12 09:16:34.996319Z],
    item_count: #Ash.NotLoaded<:aggregate, field: :item_count>,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  }
]
Categories after load: [
  %GroceryPlanner.Inventory.Category{
    id: "c7c05683-694c-4a6c-a662-ce0cdabb602a",
    name: "Test Category -576460752303422975",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:35.012032Z],
    updated_at: ~U[2025-12-12 09:16:35.012032Z],
    item_count: 0,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  },
  %GroceryPlanner.Inventory.Category{
    id: "5786f4bd-187c-40f6-ac47-9c2008a71a35",
    name: "Test Category -576460752303423039",
    icon: nil,
    sort_order: 0,
    account_id: "5380a650-2f52-4a94-b8e8-4d801ed4ddb4",
    created_at: ~U[2025-12-12 09:16:34.996319Z],
    updated_at: ~U[2025-12-12 09:16:34.996319Z],
    item_count: 0,
    account: #Ash.NotLoaded<:relationship, field: :account>,
    grocery_items: #Ash.NotLoaded<:relationship, field: :grocery_items>,
    __meta__: #Ecto.Schema.Metadata<:loaded, "categories">
  }
]
Category Breakdown: [
  %{count: 0, name: "Test Category -576460752303422975"},
  %{count: 0, name: "Test Category -576460752303423039"}
]


  1) test Analytics Dashboard renders dashboard with data (GroceryPlannerWeb.AnalyticsLiveTest)
     test/grocery_planner_web/live/analytics_live_test.exs:29
     Assertion with =~ failed
     code:  assert html =~ "Fruits"
     left:  "<html lang=\"en\"><head><meta charset=\"utf-8\"/><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/><meta name=\"csrf-token\" content=\"NxxGOAMmHwEdZ3QlJhEhJnpqPi85Hhheu-3R2MwsuRGzIdOP9Sipoyni\"/><title data-default=\"GroceryPlanner\" data-suffix=\" · Phoenix Framework\">\n      Analytics\n     · Phoenix Framework</title><link phx-track-static=\"\" rel=\"stylesheet\" href=\"/assets/css/app.css\"/><script defer=\"\" phx-track-static=\"\" type=\"text/javascript\" src=\"/assets/js/app.js\"></script><script>\n      (() => {\n        const setTheme = (theme) => {\n          if (theme === \"system\") {\n            localStorage.removeItem(\"phx:theme\");\n            document.documentElement.removeAttribute(\"data-theme\");\n          } else {\n            localStorage.setItem(\"phx:theme\", theme);\n            document.documentElement.setAttribute(\"data-theme\", theme);\n          }\n        };\n        if (!document.documentElement.hasAttribute(\"data-theme\")) {\n          setTheme(localStorage.getItem(\"phx:theme\") || \"system\");\n        }\n        window.addEventListener(\"storage\", (e) => e.key === \"phx:theme\" && setTheme(e.newValue || \"system\"));\n        \n        window.addEventListener(\"phx:set-theme\", (e) => setTheme(e.target.dataset.phxTheme));\n      })();\n    </script></head><body><div id=\"phx-GIBtFfssWyJTdQJh\" data-phx-main=\"\" data-phx-session=\"SFMyNTY.g2gDaAJhBnQAAAAIdwJpZG0AAAAUcGh4LUdJQnRGZnNzV3lKVGRRSmh3B3Nlc3Npb250AAAAAHcKcGFyZW50X3BpZHcDbmlsdwZyb3V0ZXJ3H0VsaXhpci5Hcm9jZXJ5UGxhbm5lcldlYi5Sb3V0ZXJ3BHZpZXd3JkVsaXhpci5Hcm9jZXJ5UGxhbm5lcldlYi5BbmFseXRpY3NMaXZldwhyb290X3BpZHcDbmlsdwlyb290X3ZpZXd3JkVsaXhpci5Hcm9jZXJ5UGxhbm5lcldlYi5BbmFseXRpY3NMaXZldxFsaXZlX3Nlc3Npb25fbmFtZXcHZGVmYXVsdG4GAO0J2RGbAWIAAVGA.DpupfoiH3375x04mPlg5w3oBRMTtgNIfFcpt7MZH6vQ\" data-phx-static=\"SFMyNTY.g2gDaAJhBnQAAAADdwJpZG0AAAAUcGh4LUdJQnRGZnNzV3lKVGRRSmh3BWZsYXNodAAAAAB3CmFzc2lnbl9uZXdsAAAAAncPY3VycmVudF9hY2NvdW50dwxjdXJyZW50X3VzZXJqbgYA7QnZEZsBYgABUYA.InRGNpuMSs9_7pLRd4VbVgEjQTkv1EGcYAwZnJGfYk4\"><div class=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50\"><header class=\"bg-white/50 backdrop-blur-sm px-4 sm:px-6 lg:px-8 border-b border-gray-200 sticky top-0 z-50\"><div class=\"max-w-7xl mx-auto\"><div class=\"flex items-center justify-between py-4\"><div class=\"flex-1\"><a href=\"/dashboard\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"flex items-center gap-2\"><img src=\"/images/logo.svg\" width=\"36\" alt=\"GroceryPlanner logo\"/><span class=\"text-xl font-bold text-gray-900\">GroceryPlanner</span></a></div><!-- Desktop Navigation --><nav class=\"hidden lg:flex flex-none\"><ul class=\"flex items-center space-x-2\"><li><a href=\"/dashboard\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition\">\n                  Dashboard\n                </a></li><li><a href=\"/inventory\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition\">\n                  Inventory\n                </a></li><li><a href=\"/recipes\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition\">\n                  Recipes\n                </a></li><li><a href=\"/meal-planner\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition\">\n                  Meal Planner\n                </a></li><li><a href=\"/voting\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition flex items-center gap-1\">\n                  Voting\n                  \n                </a></li><li><a href=\"/shopping\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition\">\n                  Shopping\n                </a></li><li><a href=\"/analytics\" data-phx-link=\"redirect\" data-phx-link-state=\"push\" class=\"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium transition\">\n                  Analytics\n                </a></li>" <> ...
     right: "Fruits"
     stacktrace:
       test/grocery_planner_web/live/analytics_live_test.exs:60: (test)


Finished in 3.2 seconds (0.00s async, 3.2s sync)
2 tests, 1 failure
